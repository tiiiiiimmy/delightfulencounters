<script>
  import { onMount } from "svelte";
  import { PUBLIC_IMAGES_URL } from "$env/static/public";
  import { PUBLIC_API_BASE_URL } from "$env/static/public";
  import { goto } from "$app/navigation";
  export let article;
  export let isLoggedIn;
  export let likesCount;
  export let userId;
  import Comments from "$lib/components/Comments.svelte";
  const USER_URL = `${PUBLIC_API_BASE_URL}/users`;
  let liked = false;
  let isAuthor = false;
  onMount(async () => {
    await checkIfLiked();
    await checkIfAuthor();
  });

  async function checkIfLiked() {
    if (isLoggedIn) {
      const response = await fetch(
        `${PUBLIC_API_BASE_URL}/articles/${article.article_id}/check-like/${userId}`,
        {
          method: "GET",
          headers: {
            "Content-Type": "application/json"
          }
        }
      );
      const resultiflike = await response.json();
      liked = resultiflike.liked;
    }
  }
  async function checkIfAuthor() {
    if (isLoggedIn) {
      if (userId === article.author_id) {
        isAuthor = true;
      } else {
        isAuthor = false;
      }
    }
  }
  function editArticle() {
    goto(`/articles/${article.article_id}/edit`);
  }

  function deleteArticle() {
    fetch(`${PUBLIC_API_BASE_URL}/articles/${article.article_id}`, {
      method: "DELETE"
    }).then((response) => {
      if (response.ok) {
        goto("/");
      }
    });
  }

  async function toggleLike() {
    const method = liked ? "DELETE" : "PUT";
    const response = await fetch(`${PUBLIC_API_BASE_URL}/articles/${article.article_id}/like`, {
      method,
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ userId })
    });

    if (response.status >= 200 && response.status < 300) {
      liked = !liked;
      likesCount.like_count = liked ? likesCount.like_count + 1 : likesCount.like_count - 1;
    }
  }

  function formatDate(timestamp) {
    console.log("Timestamp received:", timestamp);
    if (!timestamp) {
      return "No date provided";
    }
    const date = new Date(parseInt(timestamp));
    if (isNaN(date.getTime())) {
      return "Invalid date";
    }
    return `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()} ${date.getHours()}:${date.getMinutes()}:${date.getSeconds()}`;
  }
</script>

<div
  class="article-container"
  style="background-image: url('{`${PUBLIC_IMAGES_URL}/loginbgunder.png`}');"
>
  <article>
    <div class="header-content">
      <h1 class="article-title">{article.title}</h1>
    </div>
    <p class="author">
      <strong>Wrote by </strong>{article.username} Date: {formatDate(article.published_date)}
    </p>

    <div class="article-image">
      <img src="{PUBLIC_IMAGES_URL}/{article.image}" alt={article.title} />
    </div>

    <div class="article-content">
      {@html article.content}
    </div>

    <Comments articleId={article.article_id} currentUserId={userId} />
    <div class="like-box">
      {#if isLoggedIn}
        <button on:click={toggleLike}>
          <p>Likes {likesCount.like_count}</p>

          {#if liked}
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="212"
              height="212"
              viewBox="0 0 212 212"
              fill="none"
              class="like-icon"
            >
              <path
                d="M190.104 73.0326C187.829 67.1237 181.194 64.1781 175.285 66.4536L27.6374 123.311C21.7284 125.587 18.7829 132.221 21.0584 138.13C23.3338 144.039 29.9686 146.985 35.8776 144.709L183.525 87.8518C189.434 85.5764 192.38 78.9416 190.104 73.0326Z"
                fill="#FCB8FF"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M28.0433 124.365L175.691 67.5078C181.018 65.4566 186.999 68.1118 189.05 73.4386C191.102 78.7653 188.446 84.7464 183.12 86.7976L35.4716 143.655C30.1449 145.706 24.1638 143.051 22.1126 137.724C20.0613 132.398 22.7166 126.417 28.0433 124.365ZM175.285 66.4536C181.194 64.1781 187.829 67.1237 190.104 73.0326C192.38 78.9416 189.434 85.5764 183.525 87.8518L35.8776 144.709C29.9686 146.985 23.3338 144.039 21.0584 138.13C18.7829 132.221 21.7284 125.587 27.6374 123.311L175.285 66.4536Z"
                fill="black"
              />
              <path
                d="M73.0331 21.0586C67.1241 23.3341 64.1786 29.9689 66.4541 35.8778L123.312 183.526C125.587 189.435 132.222 192.38 138.131 190.105C144.04 187.829 146.985 181.194 144.71 175.285L87.8523 27.6376C85.5769 21.7286 78.9421 18.7831 73.0331 21.0586Z"
                fill="#FCB8FF"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M124.366 183.12L67.5083 35.4719C65.457 30.1451 68.1123 24.1641 73.4391 22.1128C78.7658 20.0615 84.7469 22.7168 86.7981 28.0436L143.656 175.691C145.707 181.018 143.052 186.999 137.725 189.051C132.398 191.102 126.417 188.446 124.366 183.12ZM66.4541 35.8778C64.1786 29.9689 67.1241 23.3341 73.0331 21.0586C78.9421 18.7831 85.5769 21.7286 87.8523 27.6376L144.71 175.285C146.985 181.194 144.04 187.829 138.131 190.105C132.222 192.38 125.587 189.435 123.312 183.526L66.4541 35.8778Z"
                fill="black"
              />
              <path
                d="M142.333 22.7995C136.546 20.2303 129.772 22.839 127.202 28.6262L63.004 173.233C60.4347 179.021 63.0434 185.795 68.8307 188.364C74.618 190.934 81.3923 188.325 83.9615 182.538L148.16 37.9304C150.729 32.1431 148.121 25.3688 142.333 22.7995Z"
                fill="#FCB8FF"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M64.0365 173.692L128.235 29.0846C130.551 23.8676 136.658 21.5159 141.875 23.832C147.092 26.1481 149.444 32.2549 147.127 37.472L82.929 182.079C80.6129 187.296 74.5061 189.648 69.2891 187.332C64.072 185.016 61.7203 178.909 64.0365 173.692ZM127.202 28.6262C129.772 22.839 136.546 20.2303 142.333 22.7995C148.121 25.3688 150.729 32.1431 148.16 37.9304L83.9615 182.538C81.3923 188.325 74.618 190.934 68.8307 188.364C63.0434 185.795 60.4347 179.021 63.004 173.233L127.202 28.6262Z"
                fill="black"
              />
              <path
                d="M22.7995 68.8308C20.2303 74.6181 22.839 81.3924 28.6262 83.9616L173.233 148.16C179.021 150.729 185.795 148.121 188.364 142.333C190.934 136.546 188.325 129.772 182.538 127.203L37.9304 63.0041C32.1431 60.4348 25.3688 63.0435 22.7995 68.8308Z"
                fill="#FCB8FF"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M173.692 147.128L29.0846 82.9291C23.8676 80.613 21.5159 74.5062 23.832 69.2892C26.1481 64.0721 32.2549 61.7205 37.472 64.0366L182.079 128.235C187.296 130.551 189.648 136.658 187.332 141.875C185.016 147.092 178.909 149.444 173.692 147.128ZM28.6262 83.9616C22.839 81.3924 20.2303 74.6181 22.7995 68.8308C25.3688 63.0435 32.1431 60.4348 37.9304 63.0041L182.538 127.203C188.325 129.772 190.934 136.546 188.364 142.333C185.795 148.121 179.021 150.729 173.233 148.16L28.6262 83.9616Z"
                fill="black"
              />
              <path
                d="M43.7399 39.4068C39.1136 43.7301 38.868 50.9852 43.1913 55.6115L151.219 171.209C155.542 175.835 162.797 176.081 167.423 171.758C172.05 167.434 172.295 160.179 167.972 155.553L59.9446 39.9554C55.6213 35.3291 48.3662 35.0835 43.7399 39.4068Z"
                fill="#F723FB"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M152.044 170.438L44.0167 54.8402C40.1194 50.6697 40.3408 44.1295 44.5112 40.2322C48.6817 36.3348 55.2219 36.5562 59.1192 40.7267L167.147 156.324C171.044 160.495 170.822 167.035 166.652 170.932C162.482 174.83 155.941 174.608 152.044 170.438ZM43.1913 55.6115C38.868 50.9852 39.1136 43.7301 43.7399 39.4068C48.3662 35.0835 55.6213 35.3291 59.9446 39.9554L167.972 155.553C172.295 160.179 172.05 167.434 167.423 171.758C162.797 176.081 155.542 175.835 151.219 171.209L43.1913 55.6115Z"
                fill="black"
              />
              <path
                d="M15.0598 102.518C14.8455 108.846 19.802 114.15 26.1303 114.364L184.257 119.717C190.585 119.931 195.889 114.975 196.103 108.646C196.317 102.318 191.361 97.0143 185.033 96.8001L26.9061 91.4471C20.5778 91.2328 15.274 96.1893 15.0598 102.518Z"
                fill="#F723FB"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M184.295 118.588L26.1685 113.235C20.4638 113.042 15.9957 108.261 16.1888 102.556C16.3819 96.8511 21.1631 92.383 26.8679 92.5761L184.994 97.9291C190.699 98.1222 195.167 102.903 194.974 108.608C194.781 114.313 190 118.781 184.295 118.588ZM26.1303 114.364C19.802 114.15 14.8455 108.846 15.0598 102.518C15.274 96.1893 20.5778 91.2328 26.9061 91.4471L185.033 96.8001C191.361 97.0143 196.317 102.318 196.103 108.646C195.889 114.975 190.585 119.931 184.257 119.717L26.1303 114.364Z"
                fill="black"
              />
              <path
                d="M108.647 15.0598C102.319 14.8455 97.0148 19.802 96.8006 26.1303L91.4476 184.257C91.2334 190.585 96.1898 195.889 102.518 196.103C108.846 196.318 114.15 191.361 114.364 185.033L119.717 26.9061C119.932 20.5778 114.975 15.274 108.647 15.0598Z"
                fill="#F723FB"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M92.5766 184.295L97.9296 26.1685C98.1227 20.4638 102.904 15.9957 108.609 16.1888C114.313 16.3819 118.782 21.1631 118.588 26.8679L113.235 184.995C113.042 190.699 108.261 195.167 102.556 194.974C96.8516 194.781 92.3835 190 92.5766 184.295ZM96.8006 26.1303C97.0148 19.802 102.319 14.8455 108.647 15.0598C114.975 15.274 119.932 20.5778 119.717 26.9061L114.364 185.033C114.15 191.361 108.846 196.318 102.518 196.103C96.1898 195.889 91.2334 190.585 91.4476 184.257L96.8006 26.1303Z"
                fill="black"
              />
              <path
                d="M170.668 42.5947C166.265 38.0446 159.007 37.9256 154.457 42.329L40.762 152.357C36.2118 156.761 36.0929 164.019 40.4963 168.569C44.8997 173.119 52.158 173.238 56.7081 168.835L170.403 58.8065C174.953 54.4031 175.072 47.1448 170.668 42.5947Z"
                fill="#F723FB"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M41.5476 153.169L155.242 43.1408C159.344 39.1713 165.887 39.2785 169.857 43.3803C173.826 47.4821 173.719 54.0252 169.617 57.9947L55.9225 168.023C51.8207 171.993 45.2776 171.885 41.3081 167.784C37.3385 163.682 37.4458 157.139 41.5476 153.169ZM154.457 42.329C159.007 37.9256 166.265 38.0446 170.668 42.5947C175.072 47.1448 174.953 54.4031 170.403 58.8065L56.7081 168.835C52.158 173.238 44.8997 173.119 40.4963 168.569C36.0929 164.019 36.2118 156.761 40.762 152.357L154.457 42.329Z"
                fill="black"
              />
              <path
                d="M107.137 40.269C106.794 40.2574 106.507 40.5256 106.496 40.8681L102.178 168.397C102.167 168.74 102.435 169.027 102.777 169.038C103.12 169.05 103.407 168.782 103.418 168.439L107.736 40.91C107.747 40.5676 107.479 40.2806 107.137 40.269Z"
                fill="#392301"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M106.496 40.8681C106.507 40.5256 106.794 40.2574 107.137 40.269C107.479 40.2806 107.747 40.5676 107.736 40.91L103.418 168.439C103.407 168.782 103.12 169.05 102.777 169.038C102.435 169.027 102.167 168.74 102.178 168.397L106.496 40.8681Z"
                fill="#392301"
              />
              <path
                d="M165.796 81.6907C165.673 81.371 165.314 81.2116 164.994 81.3347L45.915 127.188C45.5953 127.311 45.4359 127.67 45.559 127.99C45.6821 128.31 46.0411 128.469 46.3609 128.346L165.44 82.4926C165.76 82.3695 165.919 82.0105 165.796 81.6907Z"
                fill="#392301"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M164.994 81.3347C165.314 81.2116 165.673 81.371 165.796 81.6907C165.919 82.0105 165.76 82.3695 165.44 82.4926L46.3609 128.346C46.0411 128.469 45.6821 128.31 45.559 127.99C45.4359 127.67 45.5953 127.311 45.915 127.188L164.994 81.3347Z"
                fill="#392301"
              />
              <path
                d="M169.98 107.363C169.992 107.02 169.723 106.733 169.381 106.722L41.8516 102.402C41.5092 102.39 41.2222 102.658 41.2106 103.001C41.199 103.343 41.4672 103.63 41.8096 103.642L169.339 107.962C169.681 107.973 169.968 107.705 169.98 107.363Z"
                fill="#392301"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M169.381 106.722C169.723 106.733 169.992 107.02 169.98 107.363C169.968 107.705 169.681 107.973 169.339 107.962L41.8096 103.642C41.4672 103.63 41.199 103.343 41.2106 103.001C41.2222 102.658 41.5092 102.39 41.8516 102.402L169.381 106.722Z"
                fill="#392301"
              />
              <path
                d="M149.363 151.531C149.613 151.298 149.627 150.905 149.393 150.655L62.2705 57.4232C62.0366 57.1728 61.644 57.1595 61.3937 57.3935C61.1434 57.6274 61.1301 58.0199 61.364 58.2703L148.486 151.502C148.72 151.752 149.113 151.765 149.363 151.531Z"
                fill="#392301"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M149.393 150.655C149.627 150.905 149.613 151.298 149.363 151.531C149.113 151.765 148.72 151.752 148.486 151.502L61.364 58.2703C61.1301 58.02 61.1434 57.6274 61.3937 57.3935C61.644 57.1595 62.0366 57.1728 62.2705 57.4232L149.393 150.655Z"
                fill="#392301"
              />
              <path
                d="M128.707 165.323C129.027 165.2 129.186 164.841 129.063 164.521L83.2099 45.4418C83.0868 45.1221 82.7278 44.9627 82.4081 45.0858C82.0884 45.209 81.929 45.568 82.0521 45.8877L127.905 164.967C128.028 165.287 128.387 165.446 128.707 165.323Z"
                fill="#392301"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M129.063 164.521C129.186 164.841 129.027 165.2 128.707 165.323C128.387 165.446 128.028 165.287 127.905 164.967L82.0521 45.8877C81.929 45.568 82.0884 45.209 82.4081 45.0858C82.7278 44.9627 83.0868 45.1221 83.2099 45.4418L129.063 164.521Z"
                fill="#392301"
              />
              <path
                d="M131.546 46.1819C131.233 46.0429 130.867 46.184 130.728 46.4972L78.9491 163.122C78.8101 163.435 78.9513 163.802 79.2644 163.941C79.5775 164.08 79.9441 163.939 80.0831 163.626L131.862 47.0006C132.001 46.6875 131.86 46.3209 131.546 46.1819Z"
                fill="#392301"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M130.728 46.4972C130.867 46.184 131.233 46.0429 131.546 46.1819C131.86 46.3209 132.001 46.6875 131.862 47.0006L80.0831 163.626C79.9441 163.939 79.5775 164.08 79.2644 163.941C78.9513 163.802 78.8101 163.435 78.9491 163.122L130.728 46.4972Z"
                fill="#392301"
              />
              <path
                d="M59.4387 150.062C59.677 150.308 60.0697 150.314 60.3159 150.076L152.013 61.3398C152.259 61.1015 152.265 60.7088 152.027 60.4626C151.789 60.2163 151.396 60.2099 151.15 60.4482L59.4531 149.184C59.2069 149.423 59.2004 149.815 59.4387 150.062Z"
                fill="#392301"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M60.3159 150.076C60.0697 150.314 59.677 150.308 59.4387 150.062C59.2004 149.815 59.2069 149.423 59.4531 149.184L151.15 60.4482C151.396 60.2099 151.789 60.2163 152.027 60.4626C152.265 60.7088 152.259 61.1015 152.013 61.3398L60.3159 150.076Z"
                fill="#392301"
              />
              <path
                d="M46.4119 79.1991C46.2729 79.5123 46.414 79.8788 46.7272 80.0178L163.352 131.796C163.665 131.936 164.032 131.794 164.171 131.481C164.31 131.168 164.169 130.802 163.856 130.662L47.2306 78.8838C46.9175 78.7448 46.5509 78.886 46.4119 79.1991Z"
                fill="#392301"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M46.7272 80.0178C46.414 79.8788 46.2729 79.5123 46.4119 79.1991C46.5509 78.886 46.9175 78.7448 47.2306 78.8838L163.856 130.662C164.169 130.802 164.31 131.168 164.171 131.481C164.032 131.794 163.665 131.936 163.352 131.796L46.7272 80.0178Z"
                fill="#392301"
              />
              <path
                d="M51.7733 115.367C57.015 144.972 85.2634 164.721 114.868 159.48C144.472 154.238 164.222 125.99 158.98 96.3852C153.739 66.7808 125.49 47.031 95.8858 52.2727C66.2814 57.5144 46.5315 85.7628 51.7733 115.367Z"
                fill="#FFEA01"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M114.671 158.367C85.6807 163.5 58.0186 144.16 52.8856 115.17C47.7527 86.1802 67.0927 58.518 96.0827 53.3851C125.073 48.2521 152.735 67.5921 157.868 96.5822C163.001 125.572 143.661 153.234 114.671 158.367ZM114.868 159.48C85.2634 164.721 57.015 144.972 51.7733 115.367C46.5315 85.7628 66.2814 57.5144 95.8858 52.2727C125.49 47.031 153.739 66.7808 158.98 96.3852C164.222 125.99 144.472 154.238 114.868 159.48Z"
                fill="black"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M75.6502 113.993C74.3873 110.519 73.4026 106.63 72.8023 102.484C70.4713 86.3851 74.8209 72.5208 82.5174 71.5172C90.2139 70.5137 98.3428 82.751 100.674 98.8499C101.274 102.996 101.431 106.993 101.202 110.661L75.6502 113.993Z"
                fill="white"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M76.4076 112.755C75.3187 109.581 74.4626 106.068 73.9225 102.338C72.7757 94.4174 73.2825 87.101 74.9803 81.6895C76.7056 76.1901 79.5116 73.0483 82.6793 72.6353C85.847 72.2222 89.442 74.5294 92.6664 79.3834C95.8392 84.1599 98.4067 91.0754 99.5536 98.996C100.094 102.726 100.268 106.328 100.121 109.663L76.4076 112.755ZM75.6502 113.993C74.3873 110.519 73.4026 106.63 72.8023 102.484C70.4713 86.3851 74.8209 72.5208 82.5174 71.5172C90.2139 70.5137 98.3428 82.751 100.674 98.8499C101.274 102.996 101.431 106.993 101.202 110.661L75.6502 113.993Z"
                fill="black"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M92.6074 111.651L79.827 113.317C78.2293 110.291 76.9629 106.34 76.326 101.941C76.1238 100.545 75.9956 99.1756 75.9364 97.8506L80.5697 97.2465L76.3343 90.7773C77.1668 86.0094 79.1436 82.7285 81.8577 82.3746C86.3918 81.7835 91.2664 89.5853 92.7455 99.8005C93.3823 104.199 93.2858 108.328 92.6074 111.651Z"
                fill="#000B1F"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M100.057 110.871C98.7632 107.402 97.7613 103.514 97.161 99.3686C94.83 83.2697 99.4384 69.3716 107.454 68.3265C115.47 67.2813 123.857 79.4849 126.188 95.5838C126.789 99.7295 126.929 103.729 126.669 107.401L100.057 110.871Z"
                fill="white"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M100.807 109.634C99.6919 106.464 98.8213 102.953 98.2812 99.2226C97.1353 91.3081 97.7054 83.9895 99.5028 78.5691C101.324 73.0754 104.265 69.8815 107.616 69.4445C110.967 69.0075 114.706 71.3306 118.022 76.1544C121.293 80.9139 123.922 87.8154 125.068 95.7299C125.608 99.4601 125.768 103.064 125.595 106.402L100.807 109.634ZM100.057 110.871C98.7632 107.402 97.7613 103.514 97.161 99.3686C94.83 83.2697 99.4384 69.3716 107.454 68.3265C115.47 67.2813 123.857 79.4849 126.188 95.5838C126.789 99.7295 126.929 103.729 126.669 107.401L100.057 110.871Z"
                fill="black"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M117.719 108.438L104.408 110.173C102.763 107.153 101.468 103.206 100.832 98.8075C100.629 97.411 100.504 96.0414 100.45 94.7158L105.276 94.0866L100.906 87.635C101.8 82.859 103.877 79.5649 106.704 79.1964C111.426 78.5807 116.453 86.3626 117.932 96.5778C118.569 100.976 118.444 105.109 117.719 108.438Z"
                fill="#000B1F"
              />
              <path
                d="M113.613 112.841C114.607 120.053 121.261 125.094 128.473 124.099C135.685 123.104 140.726 116.451 139.731 109.238C138.736 102.026 132.083 96.9856 124.871 97.9805C117.658 98.9753 112.618 105.628 113.613 112.841Z"
                fill="#FFEA01"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M114.666 112.827C114.659 112.784 114.653 112.741 114.647 112.698C113.731 106.057 118.372 99.9309 125.013 99.0148C131.654 98.0988 137.781 102.74 138.697 109.381C138.703 109.424 138.708 109.467 138.714 109.51L139.748 109.368C139.743 109.325 139.737 109.281 139.731 109.238C138.736 102.026 132.083 96.9856 124.871 97.9805C117.658 98.9753 112.618 105.628 113.613 112.841C113.619 112.884 113.625 112.927 113.631 112.97L114.666 112.827Z"
                fill="black"
              />
              <path
                d="M105.962 141.036C92.8854 143.026 80.6709 134.039 78.6803 120.963L126.035 113.754C128.026 126.831 119.039 139.045 105.962 141.036Z"
                fill="#000B1F"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M92.5391 139.206C96.6041 141.038 101.227 141.757 105.963 141.036C115.108 139.644 122.253 133.251 125.042 125.06C120.428 122.14 114.704 120.973 108.952 122.249C100.323 124.164 94.0747 131.036 92.5391 139.206Z"
                fill="#EE6F9F"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M92.5391 139.206C94.0747 131.036 100.323 124.164 108.952 122.249C114.704 120.973 120.428 122.14 125.042 125.06C122.253 133.251 115.108 139.644 105.963 141.036C101.227 141.757 96.6041 141.038 92.5391 139.206ZM123.663 125.548C119.434 123.127 114.328 122.213 109.197 123.352C101.337 125.096 95.5608 131.182 93.8358 138.532C97.5014 140.011 101.599 140.557 105.793 139.919C114.186 138.641 120.812 132.944 123.663 125.548Z"
                fill="black"
              />
            </svg>
          {:else}
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="51"
              height="51"
              viewBox="0 0 51 51"
              fill="none"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M48.0927 13.5793C54.617 26.0084 49.791 41.3982 37.3134 47.9532C24.8358 54.5082 9.4317 49.7463 2.90734 37.3171C-3.61701 24.8879 1.20903 9.49813 13.6866 2.94311C26.1642 -3.6119 41.5683 1.15006 48.0927 13.5793ZM16.1486 12.8735C13.3135 13.1818 10.8231 14.608 9.13738 16.9206C7.48994 19.1947 6.76199 22.124 7.06849 25.1689C7.4133 28.291 8.86917 31.0661 11.7043 33.8027C14.1712 36.2092 17.5861 38.5424 21.5221 41.2316C21.6207 41.299 21.7196 41.3665 21.8189 41.4343C23.1981 42.3594 24.7689 43.4386 26.4164 44.5949C26.8761 44.9033 27.3742 45.0574 27.9106 44.9804C28.447 44.9418 28.945 44.672 29.2898 44.2866C30.3396 43.14 31.3658 42.0407 32.3134 41.0256C32.5763 40.7439 32.8332 40.4688 33.0828 40.2009C33.2373 40.0349 33.3908 39.8701 33.5433 39.7063C36.719 36.2955 39.4538 33.3584 41.2817 30.5265C43.4272 27.2117 44.2701 24.2053 43.9253 21.0833C43.5805 18.0383 42.2395 15.3403 40.1323 13.4902C37.9868 11.6016 35.2283 10.7536 32.3931 11.0619C30.286 11.2932 28.4086 12.1797 26.8378 13.7215C26.0332 14.4923 25.3436 15.4174 24.7689 16.4581C23.9644 15.5716 23.1215 14.8392 22.1637 14.2611C20.2864 13.1048 18.2941 12.6422 16.1486 12.8735Z"
                fill="black"
              />
            </svg>
          {/if}
        </button>
      {/if}
    </div>
    <div class="article-operator">
      {#if isAuthor}
        <button class="edit-button" on:click={editArticle}
          ><svg
            xmlns="http://www.w3.org/2000/svg"
            width="14"
            height="14"
            viewBox="0 0 14 14"
            fill="none"
          >
            <g clip-path="url(#clip0_387_3783)">
              <path
                d="M11.8562 5.64741C11.7238 5.64741 11.5915 5.59778 11.4895 5.49811C11.2818 5.2955 11.2777 4.963 11.4802 4.75546C12.1206 4.09893 12.1076 3.04401 11.4512 2.40362C11.1331 2.09327 10.7112 1.92606 10.2692 1.93112C9.82496 1.93659 9.40961 2.11473 9.0994 2.43274C8.89664 2.64042 8.56414 2.64425 8.35674 2.44204C8.14906 2.23956 8.14496 1.90706 8.34744 1.69938C9.39225 0.628055 11.1135 0.607 12.1846 1.6518C13.2555 2.69661 13.2768 4.4179 12.232 5.48895C12.1292 5.59436 11.9926 5.64741 11.8562 5.64741Z"
                fill="#363636"
              />
              <path
                d="M11.199 6.31657C11.0666 6.31657 10.9343 6.26694 10.8323 6.16727L7.69951 3.11106C7.49184 2.90844 7.48774 2.57594 7.69022 2.36841C7.89283 2.16059 8.22547 2.1569 8.43287 2.35911L11.5658 5.41546C11.7735 5.61807 11.7776 5.95057 11.5751 6.15811C11.472 6.26366 11.3355 6.31657 11.199 6.31657Z"
                fill="#363636"
              />
              <path
                d="M2.24881 9.22411C2.11647 9.22411 1.98412 9.17448 1.88213 9.07481C1.67446 8.8722 1.67035 8.5397 1.87283 8.33216L8.34975 1.69309C8.55236 1.48528 8.885 1.48159 9.09254 1.68393C9.30008 1.88655 9.30418 2.21905 9.1017 2.42673L2.62479 9.06565C2.52184 9.1712 2.38526 9.22411 2.24881 9.22411Z"
                fill="#363636"
              />
              <path
                d="M1.52197 13.1062C1.49039 13.1062 1.4584 13.1034 1.42613 13.0975C1.14094 13.0448 0.952266 12.771 1.0049 12.4858L1.71174 8.65138C1.76438 8.36618 2.03795 8.17696 2.32342 8.23015C2.60861 8.28278 2.79729 8.55663 2.74465 8.84183L2.03781 12.6762C1.99119 12.9292 1.77039 13.1062 1.52197 13.1062Z"
                fill="#363636"
              />
              <path
                d="M5.38455 12.2833C5.25221 12.2833 5.11987 12.2336 5.01787 12.134C4.8102 11.9313 4.8061 11.5988 5.00858 11.3913L11.4855 4.75225C11.6881 4.54457 12.0206 4.54047 12.2281 4.74295C12.4358 4.94557 12.4399 5.27793 12.2374 5.48561L5.76053 12.1247C5.65758 12.2302 5.52114 12.2833 5.38455 12.2833Z"
                fill="#363636"
              />
              <path
                d="M1.52191 13.1068C1.27868 13.1068 1.06034 12.937 1.00839 12.6895C0.948782 12.4057 1.13048 12.1272 1.41445 12.0676L5.23027 11.2662C5.51464 11.2067 5.79259 11.3883 5.8522 11.6722C5.91181 11.956 5.73011 12.2345 5.44615 12.2942L1.63032 13.0956C1.59396 13.1031 1.55773 13.1068 1.52191 13.1068Z"
                fill="#363636"
              />
              <path
                d="M12.4789 13.1181L8.10229 13.1181C7.81231 13.1181 7.57715 12.883 7.57715 12.593C7.57715 12.303 7.81231 12.0679 8.10229 12.0679L12.4789 12.0679C12.7689 12.0679 13.0041 12.303 13.0041 12.593C13.0041 12.883 12.7689 13.1181 12.4789 13.1181Z"
                fill="#363636"
              />
            </g>
            <defs>
              <clipPath id="clip0_387_3783">
                <rect width="14" height="14" fill="white" />
              </clipPath>
            </defs>
          </svg>Edit</button
        >
        <button class="delete-button" on:click={deleteArticle}
          ><svg
            xmlns="http://www.w3.org/2000/svg"
            width="14"
            height="14"
            viewBox="0 0 14 14"
            fill="none"
          >
            <path
              d="M3.47807 11.0016L3.47765 10.9362C3.47765 10.9585 3.47782 10.9802 3.47807 11.0016ZM8.39711 3.54133C8.09473 3.54133 7.84959 3.78621 7.84959 4.08885L7.85467 10.9543C7.85467 11.2564 8.09981 11.5019 8.40219 11.5019C8.70457 11.5019 8.94972 11.2564 8.94972 10.9543L8.94492 4.08885C8.94492 3.78622 8.69977 3.54133 8.39711 3.54133ZM12.2122 1.91533L7.85231 1.91736L7.84987 1.35124C7.84987 1.0486 7.60469 0.803711 7.30207 0.803711C7.20235 0.803711 7.10893 0.830489 7.02839 0.877049C6.9478 0.830489 6.85435 0.803711 6.75453 0.803711C6.45216 0.803711 6.20701 1.0486 6.20701 1.35124L6.20958 1.91813L3.06346 1.91958C3.01932 1.90811 2.97304 1.90198 2.92532 1.90198C2.87743 1.90198 2.831 1.90816 2.78673 1.91971L1.78777 1.92017C1.4854 1.92017 1.24023 2.16559 1.24023 2.46769C1.24023 2.77033 1.48539 3.01522 1.78777 3.01522L2.37807 3.01494L2.38207 11.4628H2.38288V12.0446C2.38288 12.6493 2.87319 13.1396 3.47793 13.1396H4.02547V13.1438L10.0482 13.1403V13.1396H10.5958C11.1927 13.1396 11.6779 12.6618 11.6903 12.0678L11.6858 4.09207C11.6858 3.78944 11.4406 3.54455 11.1382 3.54455C10.8359 3.54455 10.5907 3.78944 10.5907 4.09207L10.5946 11.0555C10.5754 11.8801 10.3404 12.0312 9.50098 12.0312L10.0694 12.0452L3.85632 12.0488L4.5727 12.0312C3.71527 12.0312 3.48845 11.8737 3.47807 11.0016L3.48482 12.049H3.47739L3.47311 3.01441L6.71092 3.01291C6.72696 3.01432 6.74319 3.01519 6.7596 3.01519C6.77623 3.01519 6.79264 3.01432 6.80888 3.01287L7.25512 3.01266C7.27226 3.01428 7.28959 3.01519 7.30715 3.01519C7.32492 3.01519 7.34246 3.01427 7.35981 3.01262L12.2121 3.01038C12.5145 3.01038 12.7597 2.76549 12.7597 2.46286C12.7597 2.16022 12.5145 1.91533 12.2122 1.91533ZM10.5947 11.1464L10.5952 12.0449H10.5889L10.5947 11.1464ZM5.65949 3.54133C5.35711 3.54133 5.11196 3.78621 5.11196 4.08885L5.11703 10.9543C5.11703 11.2564 5.36219 11.5019 5.66458 11.5019C5.96694 11.5019 6.2121 11.2564 6.2121 10.9543L6.20702 4.08885C6.20701 3.78622 5.96185 3.54133 5.65949 3.54133Z"
              fill="#363636"
            />
          </svg>Delete</button
        >
      {/if}
    </div>
  </article>
</div>

<style>
  .article-image {
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 20px 0;
  }

  .article-image img {
    max-width: 100%;
    max-height: 400px;
    width: auto;
    height: auto;
    border-radius: 40px;
  }
  .like-box {
    background-color: #f43dbd;
    position: absolute;
    top: 5%;
    right: 10%;
    color: black;
    height: 150px;
    width: 100px;
    border-radius: 100px;
    margin: 15px;

    transition: background-color 0.3s;
    text-align: center;
  }

  button {
    background-color: transparent;
    border-radius: 50%;
    margin: 20px 10px 10px 10px;
    transition: background-color 0.3s;
  }
  button p {
    font-size: 16px;
    font-weight: 800;
  }

  .like-icon {
    position: absolute;
    top: 50%;
    right: -50%;
    animation: likeIconAnimation 0.5s ease-in-out;
  }
  @keyframes likeIconAnimation {
    0% {
      transform: scale(0) rotate(0deg); /* 初始状态为0大小和0度旋转 */
    }
    50% {
      transform: scale(1.2) rotate(180deg); /* 中间状态为1.2倍大小和180度旋转 */
    }
    100% {
      transform: scale(1) rotate(360deg); /* 最终状态为正常大小和360度旋转 */
    }
  }
  .article-container {
    background-color: white;
    width: 100%;
    min-height: 95vh;
    border-radius: 15px;
    display: flex;
    justify-content: center;
    background-size: 100%;
    background-position: center top;
    background-repeat: repeat;
    background-color: #f4f6fe;
  }

  .header-content {
    display: flex;
    justify-content: space-between;
  }

  article {
    margin-top: 20px;
    background-color: white;
    width: 70%;
    min-width: 550px;
    border-radius: 30px;
    min-height: 85vh;
    padding: 30px;
  }

  .article-image {
    display: flex;
    justify-content: center;
  }

  .article-content {
    word-wrap: break-word;
    margin-left: 1%;
    justify-content: flex-start;
  }

  /* ???????????? */
  button {
    border: 0;
    padding: 5px 5px;
    border-radius: 5px;
  }

  .edit-button {
    background-color: rgb(231, 241, 255);
    color: black;
    height: 10%;
    width: 15%;
    border-radius: 10px;
  }
  .delete-button {
    background-color: rgb(255, 244, 231);
    color: black;
    height: 10%;
    width: 15%;
    border-radius: 10px;
    margin-left: 15px;
  }

  h1 {
    font-size: 64px;
    text-align: center;
    padding: 0 40px;
    max-width: 600px;
    background-color: #b9ff66;
    border-radius: 100px;
    border: 5px solid black;
    transform: rotate(-8deg);
    margin-left: -60px;
    margin-top: -25px;
    word-wrap: break-word;
  }

  .author {
    color: rgb(63, 63, 63);
    font-style: normal;
  }
</style>
